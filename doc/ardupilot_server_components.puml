@startuml

left to right direction

actor Admin
actor Pilote
actor Observateur
actor MDJ

MDJ -left-|> Observateur

rectangle "Machine Client" {
    component Launcher
    component "Video Decoder" as VideoDecoder
    component QGroundControl
    component MAVProxy
    component ArduSub
    component "MAVSec proxy" as SecProxy1

    Pilote -- QGroundControl : IHM
    Pilote -- Launcher : Lancer le client
    note right of Launcher
        Permet de démarrer les différents composants du client.
    end note
    QGroundControl -left- MAVProxy : MAVLink
    MAVProxy -- ArduSub : MAVLink
    ArduSub -- SecProxy1 : MAVLink
}

interface "MDJ / Observateur API" as MDJAPI
interface "Admin API" as AdminClient

rectangle "Machine Serveur" {
    component "MAVSec proxy" as SecProxy2
    component "Video Decoder" as JmeRenderer
    component "Jme Renderer" as JmeRenderer
    component "Jme Server" as JmeServer
    component "Manager" as Manager

    SecProxy2 -left- JmeServer : MAVLink
    JmeRenderer -- JmeServer : UDP Custom
    MDJAPI -- JmeServer : Control
    AdminClient -- JmeServer : Configuration
    Manager -- JmeServer : Démarre
    Manager -- JmeRenderer : Démarre
    Manager -- SecProxy2 : Démarre
    Launcher -- Manager


    note left of Manager
        Permet de démarrer les différents composants du serveur et de gérer
        l'authentification.
    end note
}

SecProxy1 -- SecProxy2 : MAVSec
QGroundControl -- VideoDecoder : H.264 clair
VideoDecoder -- JmeRenderer : H.264 chiffré
Admin --( AdminClient
Observateur --( MDJAPI
MDJ --( MDJAPI

@enduml
