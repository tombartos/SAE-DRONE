@startuml

left to right direction

actor Pilote
actor MDJ
actor Admin
actor Observateur

MDJ -right-|> Observateur

rectangle "Machine Client" {
    component Launcher
    component QGroundControl
    component MAVProxy
    component ArduSub
    component "Jme Renderer" as JmeRenderer
    component "MAVSec proxy" as SecProxy1

    Pilote -- QGroundControl : IHM
    Pilote -- Launcher : Lancer le client
    note right of Launcher
        Permet de démarrer les différents composants du client.
    end note
    QGroundControl -left- MAVProxy : MAVLink
    MAVProxy -- ArduSub : MAVLink
    ArduSub -- SecProxy1 : MAVLink
    QGroundControl -down- JmeRenderer : H.264 video
}

interface "MDJ / Observateur API" as MDJAPI
interface "Admin API" as AdminClient


rectangle "Machine Serveur" {
    component "Jme Server" as JmeServer
    component "MAVSec proxy" as SecProxy2
    component "Manager" as Manager

    note left of Manager
        Permet de démarrer les différents composants du serveur et de gérer
        l'authentification.
    end note

    JmeRenderer - JmeServer : UDP Custom Chiffré
    MDJAPI -- JmeServer : Control
    AdminClient -- JmeServer : Configuration
    SecProxy2 -left- JmeServer : MAVLink
    SecProxy1 -- SecProxy2 : MAVSec
    Launcher -- Manager
    Manager -- JmeServer : Control
}

MDJ --( MDJAPI
Admin --( AdminClient
Observateur --( MDJAPI

@enduml
